#!/usr/bin/python
# -*- coding: ascii -*-

import requests
from bs4 import BeautifulSoup

proxy_list = ["http://www.httptunnel.ge/ProxyListForFree.aspx"]
fname = "proxies/proxies.txt"
mydivs = 0


def proxy_scan():
    print("starting proxy scan..")
    print("""_____________$$________________________$$$$
==========_$$_____________________________$$
==========$__________________________________$$
==========$$___________________________________$$
==========$$__$$______________________$$__________$$
======$$__$$___$$$$_________$$$$____$$__________$$$$
======$$___$$__$$$$__$$_____$$$$__$$_$$_____________$$$
======$$___$$____$$$$_________$$$$___$$_______________$$
======$$___$$________________________$$_______________$$
======$$____$$_______________________$$___woof nigga__________$$
========$$__$$____$$$$$$_____________$$___________$$$
========$$__$$__$$______$$___________$$_________$$
========$$__$$__$$______$$___________$$_______$$
==========$$$$____$$$$$$_____________$$$$____$$$$
==========$$$$_____________________$$__$$____$$$
============$$_$$$$$$$$$$$$_____$$$$______$$$$_$$
============$$___$$______$$$$$_______________$$
============$$_____$$$$$$$__________//__________$$
============$$___//________________//___________$$
============$$____//_______________//_____________$$
============$$______//_____________//_____its the bling bling doge_________$$
============$$_________//_+_____+_//__________________$
============$$____________+_____+_________________$$
========$$______________+=====+___________$$___________$
========$$__________$$___________$$_____________$$
========$$__$$________$$__$$__$$__$$_______________$$
=====$$____$$__________$$_______$$_______________$$
=====$$____$$____________$$___$$_________________$$
=====$$______$$_____________$$_$$_______$$_________$$
=====$$______$$________$$____$$$________$$_________$$
=====$$______$$________$$____$$$_______$$__________$$
=====$$______$$________$$_______________$$__________$$
=====$$______$$________$$_______________$$____________$
_$$$$_______$$________$$_______________$$____________$$
$___$$______$$________$$$$___________$$$$____________$$
$___$$______$$________$$__$$_______$$__$$____________$$
_$$$$$______$$________$$____$$___$$_____$$___________$$
=====$$______$$________$$______$$_______$$___________$$
=====$$______$$________$$_____$$________$$___________$$
==$$________$$________$$$$$$$$___$$$$$$__$$_________$$
==$________$$________$$______$$$______$$$$_________$$
$$________$$__________$$_________$$$$$$__$$__________$
$$______$$__________$$$$$$$$$$$$$$$______$$__________$
$$_$$_$$$__________$$==============$$$$$$$__$$_________$
_$$$$$$$___________$$=======================$$________$$
=====$$__$$__$$__$$_$=======================$$__________$$
=====$$$$__$___$__$$========================$$____________$
=======$$___$___$__$==========================$$_$__$$__$$__$
==========$$$$$$$$$$=============================$$_$_$$$$$$$$""")

    r = requests.get(proxy_list[0])

    if (r.status_code == 200):
        html_page = r.text
        soup = BeautifulSoup(html_page, 'html.parser')
        #print(soup.prettify())


        mydivs = soup.findAll("a", {"target": "_new"})


        for i in range(len(mydivs)):
            x = mydivs[i]

            print(x.text)

            write_to_file(x.text)

    else:
        print("server down trying another..")
        # call function but +1 proxy_list so it is next website



def write_to_file(ipport):

    try:
        with open(fname, 'a+') as f:
            f.write(ipport + "\n")

    except:
        print("Error")



proxy_scan()
